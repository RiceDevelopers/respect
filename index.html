<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gift Star - متجر الهدايا الكويتي</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<header class="site-header">
  <div class="header-top">
    <div class="container">
      <span class="header-tagline">توصيل داخل الكويت فقط</span>
      <div class="header-links">
        <a href="cart.html" class="cart-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="9" cy="21" r="1"/>
            <circle cx="20" cy="21" r="1"/>
            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
          </svg>
          <span class="cart-count" id="cartCount">0</span>
        </a>
        <a href="login.html" class="btn-login" id="loginBtn">تسجيل الدخول</a>
        <a href="#" class="btn-login" id="logoutBtn" style="display:none" onclick="logout()">خروج</a>
      </div>
    </div>
  </div>
  <div class="header-main">
    <div class="container header-flex">
      <a href="index.html" class="logo">
        <div class="logo-star">★</div>
        <div class="logo-text">
          <span class="logo-gift">Gift</span>
          <span class="logo-star-word">Star</span>
        </div>
      </a>
      <nav class="main-nav">
        <a href="index.html" class="active">الرئيسية</a>
        <a href="shop.html">المتجر</a>
      </nav>
    </div>
  </div>
</header>

<section class="promo-section" id="promoSection">
  <div class="container">
    <h2 class="section-title">العروض والتخفيضات</h2>
    <div class="promo-grid" id="promoGrid"></div>
  </div>
</section>

<section class="categories-section">
  <div class="container">
    <h2 class="section-title">تسوق حسب الفئة</h2>
    <div class="categories-grid">
      <a href="shop.html?cat=cakes" class="category-card">
        <div class="cat-img-wrap">
          <img src="https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=300&h=300&fit=crop" alt="كيك">
        </div>
        <span>كيك</span>
      </a>
      <a href="shop.html?cat=flowers" class="category-card">
        <div class="cat-img-wrap">
          <img src="https://images.unsplash.com/photo-1490750967868-88df5691cc95?w=300&h=300&fit=crop" alt="ورد">
        </div>
        <span>ورد</span>
      </a>
      <a href="shop.html?cat=gifts" class="category-card">
        <div class="cat-img-wrap">
          <img src="https://images.unsplash.com/photo-1513885535751-8b9238bd345a?w=300&h=300&fit=crop" alt="هدايا">
        </div>
        <span>هدايا</span>
      </a>
    </div>
  </div>
</section>

<section class="featured-section">
  <div class="container">
    <h2 class="section-title">المنتجات المميزة</h2>
    <div class="products-grid" id="featuredProducts"></div>
    <div class="text-center" style="margin-top:2rem; text-align:center">
      <a href="shop.html" class="btn-outline">عرض جميع المنتجات</a>
    </div>
  </div>
</section>

<section class="why-section">
  <div class="container">
    <h2 class="section-title">لماذا Gift Star؟</h2>
    <div class="why-grid">
      <div class="why-card">
        <div class="why-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
          </svg>
        </div>
        <h3>جودة مضمونة</h3>
        <p>جميع منتجاتنا طازجة ومختارة بعناية فائقة</p>
      </div>
      <div class="why-card">
        <div class="why-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
        </div>
        <h3>توصيل سريع</h3>
        <p>نوصل في نفس اليوم لجميع مناطق الكويت</p>
      </div>
      <div class="why-card">
        <div class="why-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
        </div>
        <h3>خدمة شخصية</h3>
        <p>نساعدك في اختيار الهدية المثالية لأحبائك</p>
      </div>
      <div class="why-card">
        <div class="why-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
            <line x1="1" y1="10" x2="23" y2="10"/>
          </svg>
        </div>
        <h3>دفع آمن</h3>
        <p>طرق دفع متعددة وآمنة 100%</p>
      </div>
    </div>
  </div>
</section>

<footer class="site-footer">
  <div class="container">
    <div class="footer-grid">
      <div class="footer-brand">
        <div class="logo" style="margin-bottom:1rem">
          <div class="logo-star">★</div>
          <div class="logo-text">
            <span class="logo-gift">Gift</span>
            <span class="logo-star-word">Star</span>
          </div>
        </div>
        <p>متجر الهدايا الكويتي الأول لكل مناسباتك المميزة</p>
      </div>
      <div class="footer-links-col">
        <h4>المتجر</h4>
        <a href="shop.html?cat=cakes">كيك</a>
        <a href="shop.html?cat=flowers">ورد</a>
      </div>
      <div class="footer-links-col">
        <h4>الحساب</h4>
        <a href="login.html">تسجيل الدخول</a>
        <a href="register.html">إنشاء حساب</a>
        <a href="cart.html">سلة المشتريات</a>
      </div>
      <div class="footer-links-col">
        <h4>تواصل معنا</h4>
        <span>الكويت - جميع المحافظات</span>
        <span>support@giftstar.com.kw</span>
        <span>+965 XXXX XXXX</span>
      </div>
    </div>
    <div class="footer-bottom">
      <p>© 2024 Gift Star. جميع الحقوق محفوظة - الكويت</p>
    </div>
  </div>
</footer>

<div class="stars-bg"></div>

<script src="js/data.js"></script>
<script src="js/main.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    if (window.updateHeader) window.updateHeader();
    
    const products = window.getProducts ? window.getProducts({ featured: true, active: true }) : [];
    const container = document.getElementById('featuredProducts');
    if (container && products.length) {
        container.innerHTML = products.map(p => `
            <div class="product-card" onclick="window.location.href='product.html?id=${p.id}'">
                ${p.badge ? `<span class="product-badge">${p.badge}</span>` : ''}
                <img src="${p.image}" alt="${p.name}" class="product-img" loading="lazy">
                <div class="product-info">
                    <h3 class="product-name">${p.name}</h3>
                    <p class="product-desc">${p.description.substring(0, 60)}...</p>
                    <div class="product-footer">
                        <div class="product-price">${window.formatKWD ? window.formatKWD(p.price) : p.price.toFixed(3) + ' د.ك'}</div>
                        <button class="btn-add-cart" onclick="event.stopPropagation(); window.handleAddToCart(${p.id}, this)">أضف للسلة</button>
                    </div>
                </div>
            </div>
        `).join('');
    }
    
    const promos = window.getPromos ? window.getPromos() : [];
    const promoGrid = document.getElementById('promoGrid');
    if (promoGrid && promos.length) {
        promoGrid.innerHTML = promos.map(p => `
            <div class="promo-card">
                <img src="${p.image}" alt="${p.title}" loading="lazy">
                <div class="promo-overlay">
                    <span class="promo-badge">${p.badge || 'عرض'}</span>
                    <h3>${p.title}</h3>
                    <p>${p.description}</p>
                </div>
            </div>
        `).join('');
    } else if (promoGrid) {
        document.querySelector('.promo-section').style.display = 'none';
    }
});
</script>

<!-- كود Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyCtHnYZT8yq9tp7xaA7AyJQV4Ag4Wi1Yks",
    authDomain: "gift-star-abf48.firebaseapp.com",
    projectId: "gift-star-abf48",
    storageBucket: "gift-star-abf48.firebasestorage.app",
    messagingSenderId: "546782076914",
    appId: "1:546782076914:web:3fb957a03c7e0501fc556b"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.db = db;
console.log('✅ Firebase loaded');
</script>

<!-- Firebase Messaging -->
<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/firebase-messaging-sw.js').catch(console.error);
}
</script>
</body>
</html>
