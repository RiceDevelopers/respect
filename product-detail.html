<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ุชูุงุตูู ุงูููุชุฌ - ุนุทูุฑ Flavus</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="header-inner">
    <a href="index.html" class="logo">Flavus <span></span></a>
    <nav>
      <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
      <a href="products.html" class="active">ุงูููุชุฌุงุช</a>
      <a href="products.html?cat=ูุณุงุฆู">ูุณุงุฆู</a>
      <a href="products.html?cat=ุฑุฌุงูู">ุฑุฌุงูู</a>
      <a href="products.html?cat=ููููุณูุณ">ููููุณูุณ</a>
    </nav>
    <div class="header-actions">
      <a href="cart.html" class="btn-cart">
        ๐ ุงูุณูุฉ
        <span class="cart-badge cart-count" style="display:none">0</span>
      </a>
    </div>
    <button class="burger"><span></span><span></span><span></span></button>
  </div>
</header>

<div class="mobile-menu">
  <a href="index.html">๐ ุงูุฑุฆูุณูุฉ</a>
  <a href="products.html">๐น ุงูููุชุฌุงุช</a>
  <a href="cart.html">๐ ุงูุณูุฉ</a>
</div>

<!-- BREADCRUMB -->
<div style="padding:90px 0 0;background:var(--dark-2);border-bottom:1px solid var(--border-subtle)">
  <div class="container" style="padding-top:24px;padding-bottom:16px">
    <div style="display:flex;align-items:center;gap:8px;font-size:13px;color:var(--text-muted)">
      <a href="index.html" style="color:var(--text-muted);text-decoration:none;hover:color:var(--orange)">ุงูุฑุฆูุณูุฉ</a>
      <span>โบ</span>
      <a href="products.html" style="color:var(--text-muted);text-decoration:none">ุงูููุชุฌุงุช</a>
      <span>โบ</span>
      <span id="breadcrumb-name" style="color:var(--text-primary)">ุชุญููู...</span>
    </div>
  </div>
</div>

<section>
  <div class="container">
    <div class="product-detail" id="product-detail">
      <!-- Loaded by JS -->
      <div style="grid-column:span 2;text-align:center;padding:80px 0;color:var(--text-muted)">
        <div style="font-size:32px;margin-bottom:12px">๐ฐ๐ผ๐น</div>
        <p>ุฌุงุฑู ุชุญููู ุงูููุชุฌ...</p>
      </div>
    </div>
  </div>
</section>

<!-- RELATED PRODUCTS -->
<section style="background:var(--dark);border-top:1px solid var(--border-subtle)">
  <div class="container">
    <div class="section-header">
      <div class="section-label">ููุชุฌุงุช ูุดุงุจูุฉ</div>
      <h2 class="section-title">ูุฏ ูุนุฌุจู ุฃูุถุงู</h2>
    </div>
    <div class="products-grid" id="related-grid"></div>
  </div>
</section>

<footer>
  <div class="container">
    <div class="footer-bottom">
      <p class="footer-copy">ยฉ 2025 ุนุทูุฑ ุงูุฎุจูุฑ - ุงููููุช. ุฌููุน ุงูุญููู ูุญููุธุฉ.</p>
      <p class="footer-copy" style="color:var(--orange)">๐ณ ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู ููุท - ุงููููุช</p>
    </div>
  </div>
</footer>

<div class="chat-widget">
  <button class="chat-btn" aria-label="ุชุญุฏุซ ูุนูุง">๐ฐ๐ผ<span class="pulse"></span></button>
  <div class="chat-box">
    <div class="chat-header">
      <div class="chat-avatar">๐ฐ๐ผ</div>
      <div><div class="chat-name">ูุณุงุนุฏ ุนุทูุฑ ุงูุฎุจูุฑ - ุงููููุช</div><div class="chat-status">ูุชุตู ุงูุขู</div></div>
      <button class="chat-close">ร</button>
    </div>
    <div class="chat-messages"></div>
    <div class="chat-input-area">
      <input type="text" class="chat-input" placeholder="ุงุณุฃููู ุนู ูุฐุง ุงูุนุทุฑ..." dir="rtl">
      <button class="chat-send">โค</button>
    </div>
  </div>
</div>

<script src="main.js"></script>
<script>
const urlParams = new URLSearchParams(window.location.search);
const productId = parseInt(urlParams.get('id'));
const product = PRODUCTS.find(p => p.id === productId);

if (!product) {
  document.getElementById('product-detail').innerHTML = '<div style="grid-column:span 2;text-align:center;padding:80px 0"><p style="color:var(--text-muted)">ุงูููุชุฌ ุบูุฑ ููุฌูุฏ</p><a href="products.html" class="btn-primary" style="margin-top:20px;display:inline-block">ุงูุนูุฏุฉ ููููุชุฌุงุช</a></div>';
} else {
  document.title = `${product.name} - ุนุทูุฑ ุงูุฎุจูุฑ - ุงููููุช`;
  document.getElementById('breadcrumb-name').textContent = product.name;
  
  const isOutOfStock = product.stock === 0;
  
  document.getElementById('product-detail').innerHTML = `
    <div class="product-gallery">
      <div class="main-image">
        <img src="${product.imgs[0]}" alt="${product.name}" id="main-img">
      </div>
      <div class="thumb-row">
        ${product.imgs.map((img, i) => `
          <div class="thumb ${i === 0 ? 'active' : ''}" onclick="changeImg('${img}', this)">
            <img src="${img}" alt="">
          </div>`).join('')}
      </div>
    </div>
    <div class="detail-info">
      <div class="detail-category">${product.category}</div>
      <h1 class="detail-title">${product.name}</h1>
      <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px">
        <div style="color:var(--orange)">โโโโโ</div>
        <span style="font-size:13px;color:var(--text-muted)">(47 ุชูููู)</span>
        <span class="product-badge" style="position:static;display:inline">${isOutOfStock ? 'ููุฐุช ุงููููุฉ' : product.badge || 'ูุชููุฑ'}</span>
      </div>
      <div class="detail-price">
        ${product.oldPrice ? `<span style="font-size:22px;color:var(--text-muted);text-decoration:line-through;font-weight:400">${product.oldPrice} ุฏ.ู</span> ` : ''}
        ${product.price} <small style="font-size:18px;font-weight:400;color:var(--text-muted)">ุฏ.ู</small>
      </div>
      <p class="detail-desc">${product.desc}</p>
      ${product.notes ? `
        <div style="background:var(--dark-2);border:1px solid var(--border-subtle);border-radius:8px;padding:20px;margin-bottom:28px">
          <h4 style="font-size:12px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--orange);margin-bottom:12px">ููุชุงุช ุงูุนุทุฑ</h4>
          <p style="font-size:13px;color:var(--text-secondary);line-height:2">${product.notes}</p>
        </div>` : ''}
      <div class="size-options">
        <span class="size-label">ุงูุญุฌู</span>
        <div class="size-btns" id="size-btns">
          ${product.sizes.map((s, i) => `<button class="size-btn ${i === 0 ? 'active' : ''}" onclick="selectSize('${s}', this)">${s}</button>`).join('')}
        </div>
      </div>
      <div class="detail-actions">
        <div class="qty-large">
          <button class="qty-btn" onclick="changeQty(-1)">โ</button>
          <span class="qty-val" id="qty-val">1</span>
          <button class="qty-btn" onclick="changeQty(1)">+</button>
        </div>
        <button class="btn-primary" style="flex:1" onclick="addToCartFromDetail()" ${isOutOfStock ? 'disabled style="opacity:0.5;cursor:not-allowed"' : ''}>
          ${isOutOfStock ? 'โ ููุฐุช ุงููููุฉ' : '๐ ุฃุถู ููุณูุฉ'}
        </button>
      </div>
      ${!isOutOfStock ? `
        <a href="checkout.html" class="btn-outline" style="display:block;text-align:center;margin-top:12px" onclick="addToCartFromDetail()">โก ุงุดุชุฑ ุงูุขู</a>` : ''}
      <div style="margin-top:28px;padding-top:24px;border-top:1px solid var(--border-subtle)">
        <div style="display:flex;gap:20px;flex-wrap:wrap">
          <div style="display:flex;align-items:center;gap:8px;font-size:13px;color:var(--text-secondary)">
            ๐ฆ <span>ุฏูุน ุนูุฏ ุงูุงุณุชูุงู ูู ุงููููุช</span>
          </div>
          <div style="display:flex;align-items:center;gap:8px;font-size:13px;color:var(--text-secondary)">
            ๐ <span>ุฅุฑุฌุงุน ูุฌุงูู ุฎูุงู 7 ุฃูุงู</span>
          </div>
          <div style="display:flex;align-items:center;gap:8px;font-size:13px;color:var(--text-secondary)">
            โ <span>ุฃุตุงูุฉ ูุถูููุฉ 100%</span>
          </div>
        </div>
      </div>
    </div>
  `;

  let selectedSize = product.sizes[0];
  let qty = 1;

  window.changeImg = (src, thumb) => {
    document.getElementById('main-img').src = src;
    document.querySelectorAll('.thumb').forEach(t => t.classList.remove('active'));
    thumb.classList.add('active');
  };

  window.selectSize = (size, btn) => {
    selectedSize = size;
    document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  };

  window.changeQty = (dir) => {
    qty = Math.max(1, qty + dir);
    document.getElementById('qty-val').textContent = qty;
  };

  window.addToCartFromDetail = () => {
    for (let i = 0; i < qty; i++) addToCart(product.id, selectedSize, 1);
  };

  // Related
  const related = PRODUCTS.filter(p => p.id !== product.id && (p.category === product.category)).slice(0, 4);
  document.getElementById('related-grid').innerHTML = related.map(createProductCard).join('');
  setTimeout(initFadeIn, 100);
}
</script>
</body>
</html>
